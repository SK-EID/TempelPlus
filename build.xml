<project basedir="." default="" name="TempelPlus build">

	<property name="build.dir" location="build" />
	<property name="src" location="src"/>


	<path id="libraries">
		<fileset dir="lib">
			<include name="*.jar" />
		</fileset>
		<fileset dir="JDigiDoc/lib">
			<include name="*.jar" />
		</fileset>
	   <fileset dir="JDigiDoc">
	         <include name="*.jar" />
	   </fileset>
	</path>
	
	<target name="clean" description="Clean up" >
		<delete dir="./bin"/>
		<delete dir="${build.dir}"/>
		<delete dir="./Run.jar"/>
		<delete dir="./TempelPlus.jar"/>
	</target>

	<target name="compile" depends="">
		<mkdir dir="${build.dir}" />
		<mkdir dir="${build.dir}/classes" />
		<javac classpathref="libraries" debug="on" deprecation="on" destdir="${build.dir}/classes" optimize="on" encoding="UTF-8"
			includeantruntime="true" srcdir="src" includes="ee/sk/tempelPlus/**" excludes="ee/sk/automatedtests/**" >
		</javac>
		<jar basedir="${build.dir}/classes" destfile="${build.dir}/TempelPlus.jar" />
		<copy file="${build.dir}/TempelPlus.jar" todir="."/>
	</target>
	
  <target name="run" depends="compile">
      <delete dir="${build.dir}"/>
      <mkdir dir="${build.dir}" />
      <mkdir dir="${build.dir}/classes" />
	  <mkdir dir="${build.dir}/run_jar_manifest" />
	  
	  <manifest file="${build.dir}/run_jar_manifest/manifest.mf">
        <attribute name="Main-Class" value="ee.sk.tempelPlus.Run" />
      </manifest>
	  
      <jar basedir="${build.dir}/classes" destfile="${build.dir}/Run.jar"  manifest="${build.dir}/run_jar_manifest/manifest.mf" />

      <copy file="${build.dir}/Run.jar" todir="."/>
   </target>
</project>